<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="dashboard-container">
        <header class="dashboard-header">
            <h1>Admin Dashboard</h1>
            <div class="user-info">
                {% if user.avatar_url %}
                    <img src="{{ user.avatar_url }}" alt="Avatar" class="avatar">
                {% endif %}
                <span>Welcome, {{ user.first_name }} {{ user.last_name }}!</span>
                <form method="POST" action="{{ url_for('auth.logout') }}" style="display: inline;">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    <button type="submit" class="btn btn-secondary">Logout</button>
                </form>
            </div>
        </header>

        <div class="dashboard-content">
            <!-- Statistics Cards -->
            <div class="stats-grid">
                <div class="stat-card">
                    <h4>Total Facilitators</h4>
                    <div class="stat-number">{{ total_facilitators }}</div>
                </div>
                <div class="stat-card">
                    <h4>Total Sessions</h4>
                    <div class="stat-number">{{ total_sessions }}</div>
                </div>
                <div class="stat-card">
                    <h4>Pending Swaps</h4>
                    <div class="stat-number">{{ pending_swaps }}</div>
                </div>
                <div class="stat-card">
                    <h4>Unassigned Sessions</h4>
                    <div class="stat-number">{{ unassigned_sessions }}</div>
                </div>
            </div>

            <!-- Management Cards -->
            <div class="dashboard-grid">
                <!-- Facilitator Management -->
                <div class="dashboard-card">
                    <h3>Facilitator Management</h3>
                    <p>Create and manage facilitator accounts</p>
                    <div class="card-actions">
                        <a href="{{ url_for('admin.create_facilitator') }}" class="btn btn-primary">Create Facilitator</a>
                        <a href="{{ url_for('admin.manage_facilitators') }}" class="btn btn-secondary">Manage Facilitators</a>
                    </div>
                </div>

                <!-- Module Management -->
                <div class="dashboard-card">
                    <h3>Module Management</h3>
                    <p>View and manage all modules within units</p>
                    <div class="card-actions">
                        <a href="{{ url_for('admin.manage_modules') }}" class="btn btn-primary">Manage Modules</a>
                        <a href="{{ url_for('admin.initialize_sample_modules') }}" class="btn btn-secondary">Initialize Sample Modules</a>
                    </div>
                </div>

                <!-- Schedule Management -->
                <div class="dashboard-card">
                    <h3>Schedule Management</h3>
                    <p>Generate and view schedules</p>
                    <div class="card-actions">
                        <a href="{{ url_for('admin.view_schedule') }}" class="btn btn-primary">View Schedule</a>
                        <a href="{{ url_for('admin.generate_schedule') }}" class="btn btn-success">Generate Schedule</a>
                    </div>
                </div>

                <!-- Swap Requests -->
                <div class="dashboard-card">
                    <h3>Swap Requests</h3>
                    <p>Review and manage shift swap requests</p>
                    <div class="card-actions">
                        <a href="{{ url_for('admin.manage_swaps') }}" class="btn btn-primary">Manage Swaps</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>