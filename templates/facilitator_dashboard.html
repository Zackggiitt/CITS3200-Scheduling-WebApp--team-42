<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Facilitator Portal</title>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />

<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='facilitator.css') }}">
  <script src="{{ url_for('static', filename='js/facilitator.js') }}" defer></script>
  
  <!-- Unit Data for JavaScript -->
  <script>
    window.units = {
      {% for unit in units %}
      {{ unit.id }}: {
        id: {{ unit.id }},
        code: "{{ unit.unit_code }}",
        name: "{{ unit.unit_name }}",
        start_date: "{{ unit.start_date.isoformat() if unit.start_date else '' }}",
        end_date: "{{ unit.end_date.isoformat() if unit.end_date else '' }}",
        year: {{ unit.year }},
        semester: "{{ unit.semester }}"
      }{% if not loop.last %},{% endif %}
      {% endfor %}
    };
    
    window.currentUnit = {% if current_unit %}{
      id: {{ current_unit.id }},
      code: "{{ current_unit.unit_code }}",
      name: "{{ current_unit.unit_name }}",
      start_date: "{{ current_unit.start_date.isoformat() if current_unit.start_date else '' }}",
      end_date: "{{ current_unit.end_date.isoformat() if current_unit.end_date else '' }}",
      year: {{ current_unit.year }},
      semester: "{{ current_unit.semester }}"
    }{% else %}null{% endif %};
  </script>
</head>
<body>
<header class="site-header">
    <div class="container">
        <div class="logo">
            <span class="material-icons" aria-hidden="true">person</span>
            <h1>Facilitator Portal</h1>
        </div>
        <nav class="user-nav">
            <div class="notification-wrapper">
                <span class="material-icons notification-icon" aria-hidden="true" id="bell-icon">notifications</span>
                <span class="notification-badge" id="header-notification-badge">3</span>
            </div>
            <div class="user-info">
                <span class="material-icons profile-icon" aria-hidden="true">account_circle</span>
                <span class="user-name">facilitator Test</span>
            </div>
            <span class="user-role-tag">Lab Facilitator</span>
            <div class="user-nav-item">
                <form method="POST" action="{{ url_for('auth.logout') }}" style="display: inline;">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
                    <button type="submit" class="logout-button">
                        <span class="material-icons" aria-hidden="true">logout</span>
                        <span>Logout</span>
                    </button>
                </form>
            </div>
        </nav>
    </div>
</header>

<section id="welcome" class="main-content-wrapper">
  <div class="welcome-banner">
    <div class="welcome-text">
      <h2>{{ greeting }}, {{ user.first_name }}! ðŸ‘‹</h2>
      <p class="user-role">Lab Facilitator</p>
      <p class="session-info">You have 3 upcoming sessions today.</p>
    </div>
    <div class="welcome-icon-wrapper">
      <span class="material-icons" style="color: white; font-size: 24px;" aria-hidden="true">wb_sunny</span>
    </div>
  </div>
</section>

<section id="navigation" class="main-content-wrapper">
    <nav class="dashboard-nav">
        <a href="#dashboard" class="dashboard-nav-item active" id="dashboard-nav">
            <span class="material-icons" aria-hidden="true">dashboard</span>
            <span>Dashboard</span>
        </a>
        <a href="#unavailability" class="dashboard-nav-item" id="unavailability-nav">
            <span class="material-icons" aria-hidden="true">event_busy</span>
            <span>Unavailability</span>
        </a>
        <a href="#schedule" class="dashboard-nav-item" id="schedule-nav">
            <span class="material-icons" aria-hidden="true">calendar_today</span>
            <span>My Schedule</span>
        </a>
    </nav>
</section>

<!-- Notification Popup Modal -->
<div id="notification-popup" class="notification-popup">
    <div class="notification-popup-content">
        <div class="notification-popup-header">
            <button id="popup-close" class="popup-close-btn" aria-label="Close notifications">
                <span class="material-icons">close</span>
            </button>
            <div class="popup-header-row">
                <h3>Notifications <span class="notification-count">3</span></h3>
            </div>
            <div class="popup-subheader-row">
                <p>View all your notifications and important updates.</p>
                <div class="notification-popup-actions">
                    <button id="popup-mark-all-read" class="notification-action-btn">
                        <span class="material-icons">done_all</span>
                        Mark All Read
                    </button>
                </div>
            </div>
        </div>
        
        <div class="notification-popup-filters">
            <button class="popup-filter-btn active" data-filter="all">All 6</button>
            <button class="popup-filter-btn" data-filter="unread">Unread 3</button>
            <button class="popup-filter-btn" data-filter="action">Action Required 3</button>
        </div>
        
        <div class="notification-popup-list" id="popup-notifications-list">
            <!-- Shift Notifications -->
            <div class="popup-notification-item unread" data-type="shifts">
                <div class="popup-notification-icon shift">
                    <span class="material-icons">schedule</span>
                </div>
                <div class="popup-notification-content">
                    <div class="popup-notification-header">
                        <h4>New Shift Allocated</h4>
                        <span class="popup-notification-time">5 minutes ago</span>
                    </div>
                    <p class="popup-notification-message">You have been assigned to Lab Session CITS3200 on Friday, August 25, 2025 from 2:00 PM - 6:00 PM in Building 314, Room 105.</p>
                    <div class="popup-notification-actions-inline">
                        <button class="popup-action-btn accept">
                            <span class="material-icons">check</span>
                            Accept
                        </button>
                        <button class="popup-action-btn decline">
                            <span class="material-icons">close</span>
                            Decline
                        </button>
                    </div>
                </div>
                <div class="popup-notification-status unread-indicator"></div>
            </div>

            <div class="popup-notification-item unread" data-type="updates">
                <div class="popup-notification-icon update">
                    <span class="material-icons">info</span>
                </div>
                <div class="popup-notification-content">
                    <div class="popup-notification-header">
                        <h4>Class Information Updated</h4>
                        <span class="popup-notification-time">2 hours ago</span>
                    </div>
                    <p class="popup-notification-message">CITS3200 Software Engineering Project - Location changed from Building 314 Room 105 to Building 314 Room 208. Session time remains 2:00 PM - 6:00 PM.</p>
                    <div class="popup-notification-meta">
                        <span class="popup-tag update">Location Change</span>
                    </div>
                </div>
                <div class="popup-notification-status unread-indicator"></div>
            </div>

            <div class="popup-notification-item" data-type="shifts">
                <div class="popup-notification-icon shift">
                    <span class="material-icons">event_available</span>
                </div>
                <div class="popup-notification-content">
                    <div class="popup-notification-header">
                        <h4>Shift Confirmed</h4>
                        <span class="popup-notification-time">1 day ago</span>
                    </div>
                    <p class="popup-notification-message">Your shift for CITS1001 Object-Oriented Programming on Thursday, August 24, 2025 from 9:00 AM - 1:00 PM has been confirmed.</p>
                    <div class="popup-notification-meta">
                        <span class="popup-tag confirmed">Confirmed</span>
                    </div>
                </div>
            </div>

            <div class="popup-notification-item unread" data-type="alerts">
                <div class="popup-notification-icon alert">
                    <span class="material-icons">warning</span>
                </div>
                <div class="popup-notification-content">
                    <div class="popup-notification-header">
                        <h4>Availability Update Required</h4>
                        <span class="popup-notification-time">3 days ago</span>
                    </div>
                    <p class="popup-notification-message">Your availability hasn't been updated in 2 weeks. Please update your available times to ensure optimal shift assignments.</p>
                    <div class="popup-notification-actions-inline">
                        <button class="popup-action-btn primary">
                            <span class="material-icons">edit_calendar</span>
                            Update Now
                        </button>
                    </div>
                </div>
                <div class="popup-notification-status unread-indicator"></div>
            </div>

            <div class="popup-notification-item" data-type="updates">
                <div class="popup-notification-icon update">
                    <span class="material-icons">schedule_send</span>
                </div>
                <div class="popup-notification-content">
                    <div class="popup-notification-header">
                        <h4>Session Time Changed</h4>
                        <span class="popup-notification-time">1 week ago</span>
                    </div>
                    <p class="popup-notification-message">CITS2200 Data Structures session time updated from 10:00 AM - 2:00 PM to 11:00 AM - 3:00 PM for Wednesday, August 30, 2025.</p>
                    <div class="popup-notification-meta">
                        <span class="popup-tag update">Time Change</span>
                    </div>
                </div>
            </div>

            <div class="popup-notification-item" data-type="shifts">
                <div class="popup-notification-icon shift">
                    <span class="material-icons">assignment_turned_in</span>
                </div>
                <div class="popup-notification-content">
                    <div class="popup-notification-header">
                        <h4>Shift Completed</h4>
                        <span class="popup-notification-time">1 week ago</span>
                    </div>
                    <p class="popup-notification-message">Your shift for CITS1402 Relational Database Management Systems on August 15, 2025 has been marked as completed. Thank you for your service!</p>
                    <div class="popup-notification-meta">
                        <span class="popup-tag completed">Completed</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Overlay for popup -->
<div id="popup-overlay" class="popup-overlay"></div>

<!-- Unit Selector Section -->
<section id="unit-selector" class="main-content-wrapper">
    <div class="unit-selector-container">
        <!-- Left Side: Current Unit Information -->
        <div class="unit-info-section">
            <div class="unit-main-info">
                <h2 class="unit-code">CITS1001</h2>
                <h3 class="unit-name">Introduction to Computing</h3>
            </div>
            <div class="unit-details">
                <div class="unit-badges">
                    <span class="semester-badge">Semester 2, 2025</span>
                    <span class="status-badge active">
                        <span class="material-icons">check_circle</span>
                        Active
                    </span>
                </div>
                <div class="session-info">
                    <span class="material-icons">calendar_today</span>
                    <span>6 sessions</span>
                    <span class="date-range">2/24/2025 - 6/13/2025</span>
                </div>
            </div>
        </div>
        
        <!-- Right Side: Control Buttons -->
        <div class="unit-controls-section">
            <button class="control-btn all-units-btn">
                <span class="material-icons">list</span>
                All Units
            </button>
            <div class="unit-dropdown-wrapper">
                <button class="control-btn switch-unit-btn" id="switch-unit-trigger">
                    Switch Unit
                    <span class="material-icons dropdown-arrow">keyboard_arrow_down</span>
                </button>
                <div class="dropdown-menu" id="unit-dropdown-menu" style="display: none;">
                    <!-- Active Units Group -->
                    <div class="dropdown-group">
                        <div class="group-header">
                            <span class="group-title">Active Units</span>
                            <span class="group-count">(3)</span>
                        </div>
                        <div class="group-items">
                            <div class="unit-item" data-unit-id="1">
                                <div class="unit-item-info">
                                    <span class="unit-item-code">CITS1001</span>
                                    <span class="unit-item-name">Introduction to Computing</span>
                                </div>
                                <span class="unit-item-badge active">Active</span>
                            </div>
                            <div class="unit-item" data-unit-id="2">
                                <div class="unit-item-info">
                                    <span class="unit-item-code">CITS1401</span>
                                    <span class="unit-item-name">Computer Science</span>
                                </div>
                                <span class="unit-item-badge active">Active</span>
                            </div>
                            <div class="unit-item" data-unit-id="3">
                                <div class="unit-item-info">
                                    <span class="unit-item-code">CITS2000</span>
                                    <span class="unit-item-name">Data Structures</span>
                                </div>
                                <span class="unit-item-badge active">Active</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Past Units Group -->
                    <div class="dropdown-group">
                        <div class="group-header">
                            <span class="group-title">Past Units</span>
                            <span class="group-count">(2)</span>
                        </div>
                        <div class="group-items">
                            <div class="unit-item" data-unit-id="4">
                                <div class="unit-item-info">
                                    <span class="unit-item-code">CITS2200</span>
                                    <span class="unit-item-name">Algorithms</span>
                                </div>
                                <span class="unit-item-badge completed">
                                    <span class="material-icons">check_circle</span>
                                    Completed
                                </span>
                            </div>
                            <div class="unit-item" data-unit-id="5">
                                <div class="unit-item-info">
                                    <span class="unit-item-code">CITS3000</span>
                                    <span class="unit-item-name">Software Engineering</span>
                                </div>
                                <span class="unit-item-badge completed">
                                    <span class="material-icons">check_circle</span>
                                    Completed
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section id="unavailability-alert" class="main-content-wrapper">
    <div class="alert-bar">
        <div class="alert-content">
            <span class="material-icons" aria-hidden="true">warning</span>
            <p><strong>Unavailability Update!</strong> Ensure your unavailabilities is up to date across all units.</p>
        </div>
        <a href="#" class="alert-button" id="update-now-btn">
            <span>Update Now</span>
            <span class="material-icons" aria-hidden="true">arrow_forward</span>
        </a>
    </div>
</section>
<section id="stats" class="main-content-wrapper">
    <div class="stats-grid">
        <div class="stat-card purple">
            <div class="stat-header">
                <h4>This Week Hours</h4>
                <span class="material-icons" aria-hidden="true">schedule</span>
            </div>
            <p class="stat-value">32</p>
            <p class="stat-subtext">4 sessions</p>
        </div>
        <div class="stat-card blue">
            <div class="stat-header">
                <h4>Pending Approvals</h4>
                <span class="material-icons" aria-hidden="true">pending_actions</span>
            </div>
            <p class="stat-value">1</p>
            <p class="stat-subtext">Needs response</p>
        </div>
        <div class="stat-card gray">
            <div class="stat-header">
                <h4>Total Hours (Month)</h4>
                <span class="material-icons" aria-hidden="true">calendar_today</span>
            </div>
            <p class="stat-value">156</p>
            <p class="stat-subtext">This month</p>
        </div>
        <div class="stat-card green">
            <div class="stat-header">
                <h4>Available Days</h4>
                <span class="material-icons" aria-hidden="true">event_available</span>
            </div>
            <p class="stat-value" id="available-days-count">4</p>
            <p class="stat-subtext">Per week</p>
        </div>
    </div>
</section>
<section id="details" class="main-content-wrapper">
    <div class="details-single">
        <div class="details-card">
            <div class="card-header">
                <h3>Your Upcoming Sessions</h3>
                <a href="#" class="view-all-link">View All</a>
            </div>
            <div class="session-list">
                <div class="session-item">
                    <div class="session-info">
                        <div class="session-title">
                            <h4>Today</h4>
                            <span class="tag confirmed">confirmed</span>
                        </div>
                        <p class="session-time">8:00 AM - 4:00 PM</p>
                        <p class="session-location">Main Store</p>
                    </div>
                </div>
                <div class="session-item">
                    <div class="session-info">
                        <div class="session-title">
                            <h4>Tomorrow</h4>
                            <span class="tag pending">pending</span>
                        </div>
                        <p class="session-time">8:00 AM - 4:00 PM</p>
                    </div>
                    <div class="session-actions">
                        <a href="#" class="action-btn accept">
                            <img src="images/2_111.svg" alt=""> Accept
                        </a>
                        <a href="#" class="action-btn decline">Decline</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Unavailability View -->
<section id="unavailability-view" class="main-content-wrapper" style="display: none;">
  <div class="unavailability-container">
    <div class="unavailability-header">
      <div class="header-content">
        <h2>My Unavailability</h2>
        <p class="unavailability-subtitle">Manage your unavailable dates for <span id="current-unit-name">CITS1001</span></p>
      </div>
      <div class="header-actions">
        <button id="refresh-unavailability" class="btn-secondary">
          <span class="material-icons">refresh</span>
          Refresh
        </button>
      </div>
    </div>
    
    <!-- Unit Information Card -->
    <div class="unit-info-card">
      <div class="unit-info-content">
        <span class="material-icons unit-icon">calendar_today</span>
        <div class="unit-info-text">
          <p><strong id="unit-code-display">CITS1001</strong> is scheduled for <span id="unit-date-range">01/09/2025 - 26/09/2025</span></p>
          <p class="unit-info-note">You can only set unavailability for dates within this period</p>
        </div>
      </div>
    </div>
    
    <!-- Unavailability Summary -->
    <div class="unavailability-summary">
      <div class="summary-stats">
        <div class="stat-item">
          <span class="material-icons">event_busy</span>
          <div class="stat-content">
            <span class="stat-number" id="total-unavailable-days">0</span>
            <span class="stat-label">Unavailable Days</span>
          </div>
        </div>
        <div class="stat-item">
          <span class="material-icons">repeat</span>
          <div class="stat-content">
            <span class="stat-number" id="recurring-patterns">0</span>
            <span class="stat-label">Recurring Patterns</span>
          </div>
        </div>
        <div class="stat-item">
          <span class="material-icons">schedule</span>
          <div class="stat-content">
            <span class="stat-number" id="partial-days">0</span>
            <span class="stat-label">Partial Days</span>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Unavailable Dates Section -->
    <div class="unavailable-dates-section">
      <div class="section-header">
        <span class="material-icons">event_busy</span>
        <h3>Unavailable Dates</h3>
        <div class="section-actions">
          <button id="bulk-edit-btn" class="btn-outline">
            <span class="material-icons">edit</span>
            Bulk Edit
          </button>
        </div>
      </div>
      <p class="section-description">
        Mark specific dates when you will not be available for scheduling. The system will consider you available for this unit on all other dates where you have not indicated your unavailability. Please make sure that your unavailabilities for each unit is up to date.
      </p>
      
      <!-- Calendar Container -->
      <div class="calendar-container">
        <div class="calendar-header">
          <div class="calendar-controls">
            <button id="prev-month-unavailability" class="calendar-btn">
              <span class="material-icons">chevron_left</span>
            </button>
            <span id="current-month-unavailability" class="month-title">September 2025</span>
            <button id="next-month-unavailability" class="calendar-btn">
              <span class="material-icons">chevron_right</span>
            </button>
          </div>
          <div class="calendar-view-options">
            <button id="month-view" class="view-btn active">Month</button>
            <button id="week-view" class="view-btn">Week</button>
          </div>
        </div>
        
        <div class="calendar-grid" id="unavailability-calendar-grid">
          <div class="calendar-weekdays">
            <div class="weekday">Su</div>
            <div class="weekday">Mo</div>
            <div class="weekday">Tu</div>
            <div class="weekday">We</div>
            <div class="weekday">Th</div>
            <div class="weekday">Fr</div>
            <div class="weekday">Sa</div>
          </div>
          
          <div class="calendar-days" id="unavailability-calendar-days">
            <!-- Calendar days will be generated by JavaScript -->
          </div>
        </div>
        
        <div class="calendar-footer">
          <div class="calendar-legend">
            <div class="legend-item">
              <div class="legend-color unit-period"></div>
              <span>Unit Period</span>
            </div>
            <div class="legend-item">
              <div class="legend-color unavailable"></div>
              <span>Unavailable</span>
            </div>
            <div class="legend-item">
              <div class="legend-color outside-period"></div>
              <span>Outside Period</span>
            </div>
          </div>
          <p class="calendar-instruction">Click on calendar dates within the unit period to set specific unavailable times</p>
        </div>
      </div>
    </div>
    
    <!-- Recent Unavailability List -->
    <div class="recent-unavailability-section">
      <div class="section-header">
        <span class="material-icons">history</span>
        <h3>Recent Unavailability</h3>
        <div class="section-actions">
          <button id="view-all-unavailability" class="btn-outline">
            <span class="material-icons">list</span>
            View All
          </button>
        </div>
      </div>
      
      <div class="unavailability-list" id="recent-unavailability-list">
        <div class="no-unavailability">
          <span class="material-icons">event_available</span>
          <p>No unavailability set yet. Click on calendar dates to get started.</p>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Set Unavailable Times Modal -->
<div id="unavailability-modal" class="modal-overlay" style="display: none;">
  <div class="modal-content unavailability-modal-content">
    <div class="modal-header">
      <div class="modal-title-section">
        <span class="material-icons">event_busy</span>
        <h2>Set Unavailable Times</h2>
      </div>
      <button id="unavailability-modal-close" class="modal-close-btn">
        <span class="material-icons">close</span>
      </button>
    </div>
    
    <div class="modal-body">
      <p class="modal-subtitle" id="modal-date-subtitle">Configure your unavailable times for Monday, September 8, 2025</p>
      
      <!-- Full Day Unavailable -->
      <div class="modal-section">
        <div class="section-header">
          <h3>Full Day Unavailable</h3>
          <label class="toggle-switch">
            <input type="checkbox" id="full-day-toggle">
            <span class="toggle-slider"></span>
          </label>
        </div>
        <p class="section-description">Mark this entire day as unavailable</p>
      </div>
      
      <!-- Recurring Unavailability -->
      <div class="modal-section">
        <div class="section-header">
          <h3>Recurring Unavailability</h3>
          <label class="toggle-switch">
            <input type="checkbox" id="recurring-toggle">
            <span class="toggle-slider"></span>
          </label>
        </div>
        <p class="section-description">Apply this unavailability pattern repeatedly</p>
        
        <!-- Recurring Pattern Options (hidden by default) -->
        <div id="recurring-options" class="recurring-options" style="display: none;">
          <div class="recurring-controls">
            <div class="control-group">
              <label for="repeat-every">Repeat Every</label>
              <select id="repeat-every">
                <option value="weekly">Weekly (every 7 days)</option>
                <option value="monthly">Monthly</option>
                <option value="custom">Custom...</option>
              </select>
            </div>
            
            <div class="control-group" id="custom-recurrence" style="display: none;">
              <label for="custom-interval">Repeat every</label>
              <input type="number" id="custom-interval" value="1" min="1">
              <select id="custom-unit">
                <option value="week">Week</option>
                <option value="month">Month</option>
              </select>
            </div>
            
            <div class="control-group">
              <label for="until-date">Until Date</label>
              <input type="date" id="until-date">
            </div>
          </div>
          
          <div class="recurring-preview" id="recurring-preview">
            <div class="preview-content">
              <p id="preview-text">This will create unavailability on 3 dates (every Monday) from 08/09/2025 to 26/09/2025</p>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Specific Time Ranges -->
      <div class="modal-section">
        <div class="section-header">
          <h3>Specific Time Ranges</h3>
          <button id="add-time-range" class="add-btn">
            <span class="material-icons">add</span>
            Add Time Range
          </button>
        </div>
        
        <div id="time-ranges-container">
          <div class="no-time-ranges">
            <span class="material-icons">schedule</span>
            <p>No specific time ranges set. Click 'Add Time Range' to specify unavailable hours</p>
          </div>
        </div>
      </div>
      
      <!-- Reason Section -->
      <div class="modal-section">
        <div class="section-header">
          <h3>Reason (Optional)</h3>
        </div>
        <textarea id="unavailability-reason" placeholder="e.g., Doctor appointment, Personal commitment" rows="3"></textarea>
      </div>
      
      <!-- Advanced Options -->
      <div class="modal-section advanced-section">
        <div class="section-header">
          <h3>Advanced Options</h3>
          <button id="toggle-advanced" class="toggle-btn">
            <span class="material-icons">expand_more</span>
          </button>
        </div>
        
        <div id="advanced-options" class="advanced-options" style="display: none;">
          <div class="control-group">
            <label for="priority-level">Priority Level</label>
            <select id="priority-level">
              <option value="normal">Normal</option>
              <option value="high">High</option>
              <option value="critical">Critical</option>
            </select>
          </div>
          
          <div class="control-group">
            <label for="notification-settings">Notification Settings</label>
            <div class="checkbox-group">
              <label class="checkbox-label">
                <input type="checkbox" id="notify-admin" checked>
                <span class="checkmark"></span>
                Notify administrators
              </label>
              <label class="checkbox-label">
                <input type="checkbox" id="notify-peers">
                <span class="checkmark"></span>
                Notify peer facilitators
              </label>
            </div>
          </div>
          
          <div class="control-group">
            <label for="auto-approve">Auto-approve scheduling conflicts</label>
            <label class="toggle-switch">
              <input type="checkbox" id="auto-approve">
              <span class="toggle-slider"></span>
            </label>
          </div>
        </div>
      </div>
    </div>
    
    <div class="modal-footer">
      <div class="footer-actions">
        <button id="cancel-unavailability" class="btn-secondary">Cancel</button>
        <button id="save-unavailability" class="btn-primary">
          <span class="material-icons">save</span>
          Save Configuration
        </button>
      </div>
      <div class="footer-info">
        <span class="material-icons">info</span>
        <span>Changes will be applied immediately and visible to administrators</span>
      </div>
    </div>
  </div>
</div>

<!-- Bulk Edit Modal -->
<div id="bulk-edit-modal" class="modal-overlay" style="display: none;">
  <div class="modal-content bulk-edit-modal-content">
    <div class="modal-header">
      <div class="modal-title-section">
        <span class="material-icons">edit</span>
        <h2>Bulk Edit Unavailability</h2>
      </div>
      <button id="bulk-edit-modal-close" class="modal-close-btn">
        <span class="material-icons">close</span>
      </button>
    </div>
    
    <div class="modal-body">
      <p class="modal-subtitle">Select multiple dates and apply unavailability settings to all of them</p>
      
      <!-- Date Range Selection -->
      <div class="modal-section">
        <div class="section-header">
          <h3>Date Range</h3>
        </div>
        <div class="date-range-controls">
          <div class="control-group">
            <label for="bulk-start-date">Start Date</label>
            <input type="date" id="bulk-start-date">
          </div>
          <div class="control-group">
            <label for="bulk-end-date">End Date</label>
            <input type="date" id="bulk-end-date">
          </div>
          <div class="control-group">
            <label for="bulk-days-of-week">Days of Week</label>
            <div class="days-checkbox-group">
              <label class="day-checkbox-label">
                <input type="checkbox" value="monday"> Mon
              </label>
              <label class="day-checkbox-label">
                <input type="checkbox" value="tuesday"> Tue
              </label>
              <label class="day-checkbox-label">
                <input type="checkbox" value="wednesday"> Wed
              </label>
              <label class="day-checkbox-label">
                <input type="checkbox" value="thursday"> Thu
              </label>
              <label class="day-checkbox-label">
                <input type="checkbox" value="friday"> Fri
              </label>
              <label class="day-checkbox-label">
                <input type="checkbox" value="saturday"> Sat
              </label>
              <label class="day-checkbox-label">
                <input type="checkbox" value="sunday"> Sun
              </label>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Bulk Settings -->
      <div class="modal-section">
        <div class="section-header">
          <h3>Unavailability Settings</h3>
        </div>
        
        <div class="control-group">
          <label for="bulk-full-day">Full Day Unavailable</label>
          <label class="toggle-switch">
            <input type="checkbox" id="bulk-full-day">
            <span class="toggle-slider"></span>
          </label>
        </div>
        
        <div class="control-group" id="bulk-time-range" style="display: none;">
          <label for="bulk-start-time">Start Time</label>
          <input type="time" id="bulk-start-time" value="09:00">
          <label for="bulk-end-time">End Time</label>
          <input type="time" id="bulk-end-time" value="17:00">
        </div>
        
        <div class="control-group">
          <label for="bulk-reason">Reason (Optional)</label>
          <textarea id="bulk-reason" placeholder="e.g., Vacation, Conference, Personal commitment" rows="2"></textarea>
        </div>
      </div>
      
      <!-- Preview -->
      <div class="modal-section">
        <div class="section-header">
          <h3>Preview</h3>
        </div>
        <div class="bulk-preview" id="bulk-preview">
          <p>Select date range and settings to see preview</p>
        </div>
      </div>
    </div>
    
    <div class="modal-footer">
      <div class="footer-actions">
        <button id="cancel-bulk-edit" class="btn-secondary">Cancel</button>
        <button id="apply-bulk-edit" class="btn-primary">
          <span class="material-icons">check</span>
          Apply to Selected Dates
        </button>
      </div>
    </div>
  </div>
</div>

<!-- View All Unavailability Modal -->
<div id="view-all-modal" class="modal-overlay" style="display: none;">
  <div class="modal-content view-all-modal-content">
    <div class="modal-header">
      <div class="modal-title-section">
        <span class="material-icons">list</span>
        <h2>All Unavailability</h2>
      </div>
      <button id="view-all-modal-close" class="modal-close-btn">
        <span class="material-icons">close</span>
      </button>
    </div>
    
    <div class="modal-body">
      <div class="view-all-controls">
        <div class="filter-controls">
          <select id="unavailability-filter">
            <option value="all">All Unavailability</option>
            <option value="full-day">Full Day Only</option>
            <option value="partial">Partial Day Only</option>
            <option value="recurring">Recurring Only</option>
          </select>
          <input type="text" id="unavailability-search" placeholder="Search by reason...">
        </div>
        <div class="sort-controls">
          <select id="unavailability-sort">
            <option value="date-desc">Date (Newest First)</option>
            <option value="date-asc">Date (Oldest First)</option>
            <option value="reason">Reason (A-Z)</option>
          </select>
        </div>
      </div>
      
      <div class="unavailability-table-container">
        <table class="unavailability-table">
          <thead>
            <tr>
              <th>Date</th>
              <th>Type</th>
              <th>Time Range</th>
              <th>Recurring</th>
              <th>Reason</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="unavailability-table-body">
            <!-- Table rows will be populated by JavaScript -->
          </tbody>
        </table>
      </div>
    </div>
    
    <div class="modal-footer">
      <div class="footer-actions">
        <button id="close-view-all" class="btn-secondary">Close</button>
        <button id="export-unavailability" class="btn-outline">
          <span class="material-icons">download</span>
          Export
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Calendar View -->
<section id="calendar-view" class="main-content-wrapper" style="display: none;">
  <div class="calendar-container">
    <div class="calendar-header">
      <h2>My Schedule</h2>
      <div class="calendar-controls">
        <button id="prev-month" class="calendar-btn">
          <span class="material-icons">chevron_left</span>
        </button>
        <span id="current-month" class="month-title">August 2025</span>
        <button id="next-month" class="calendar-btn">
          <span class="material-icons">chevron_right</span>
        </button>
      </div>
    </div>
    
    <div class="calendar-grid">
      <div class="calendar-weekdays">
        <div class="weekday">Sun</div>
        <div class="weekday">Mon</div>
        <div class="weekday">Tue</div>
        <div class="weekday">Wed</div>
        <div class="weekday">Thu</div>
        <div class="weekday">Fri</div>
        <div class="weekday">Sat</div>
      </div>
      
      <div class="calendar-days" id="calendar-days">
      </div>
    </div>
    
    <div class="schedule-legend">
      <div class="legend-item">
        <div class="legend-color confirmed"></div>
        <span>Confirmed Sessions</span>
      </div>
      <div class="legend-item">
        <div class="legend-color pending"></div>
        <span>Pending Sessions</span>
      </div>
      <div class="legend-item">
        <div class="legend-color available"></div>
        <span>Available</span>
      </div>
    </div>
  </div>
</section>

<!-- Sessions Modal -->
<div id="sessions-modal" class="modal-overlay" style="display: none;">
    <div class="modal-content">
        <div class="modal-header">
            <h2 id="modal-title">All Sessions</h2>
            <button id="modal-close-btn" class="modal-close-btn">
              <span class="material-icons">close</span>
            </button>
        </div>
        <div class="modal-body">
            <p id="modal-subtitle" class="modal-subtitle"></p>
            <div id="modal-sessions-list" class="modal-sessions-list">
                <!-- Sessions will be populated here -->
          </div>
        </div>
      </div>
    </div>

</body>
</html>








