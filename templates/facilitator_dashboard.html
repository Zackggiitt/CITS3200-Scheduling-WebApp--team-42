<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Facilitator Portal</title>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />

<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='facilitator.css') }}">
  <script src="{{ url_for('static', filename='js/facilitator.js') }}" defer></script>
</head>
<body>
<header class="site-header">
    <div class="container">
        <div class="logo">
            <span class="material-icons" aria-hidden="true">person</span>
            <h1>Facilitator Portal</h1>
        </div>
        <nav class="user-nav">
            <div class="notification-wrapper">
                <span class="material-icons notification-icon" aria-hidden="true" id="bell-icon">notifications</span>
                <span class="notification-badge" id="header-notification-badge">3</span>
            </div>
            <div class="user-info">
                <span class="material-icons profile-icon" aria-hidden="true">account_circle</span>
                <span class="user-name">facilitator Test</span>
            </div>
            <span class="user-role-tag">Lab Facilitator</span>
            <div class="user-nav-item">
                <form method="POST" action="{{ url_for('auth.logout') }}" style="display: inline;">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
                    <button type="submit" class="logout-button">
                        <span class="material-icons" aria-hidden="true">logout</span>
                        <span>Logout</span>
                    </button>
                </form>
            </div>
        </nav>
    </div>
</header>

<section id="navigation" class="main-content-wrapper">
    <nav class="dashboard-nav">
        <a href="#dashboard" class="dashboard-nav-item active">
            <span class="material-icons" aria-hidden="true">dashboard</span>
            <span>Dashboard</span>
        </a>
        <a href="#availability" class="dashboard-nav-item">
            <span class="material-icons" aria-hidden="true">event_available</span>
            <span>Availability</span>
        </a>
        <a href="#schedule" class="dashboard-nav-item">
            <span class="material-icons" aria-hidden="true">calendar_today</span>
            <span>My Schedule</span>
        </a>
    </nav>
</section>

<!-- Notification Popup Modal -->
<div id="notification-popup" class="notification-popup">
    <div class="notification-popup-content">
        <div class="notification-popup-header">
            <button id="popup-close" class="popup-close-btn" aria-label="Close notifications">
                <span class="material-icons">close</span>
            </button>
            <div class="popup-header-row">
                <h3>Notifications <span class="notification-count">3</span></h3>
            </div>
            <div class="popup-subheader-row">
                <p>View all your notifications and important updates.</p>
                <div class="notification-popup-actions">
                    <button id="popup-mark-all-read" class="notification-action-btn">
                        <span class="material-icons">done_all</span>
                        Mark All Read
                    </button>
                </div>
            </div>
        </div>
        
        <div class="notification-popup-filters">
            <button class="popup-filter-btn active" data-filter="all">All 6</button>
            <button class="popup-filter-btn" data-filter="unread">Unread 3</button>
            <button class="popup-filter-btn" data-filter="action">Action Required 3</button>
        </div>
        
        <div class="notification-popup-list" id="popup-notifications-list">
            <!-- Shift Notifications -->
            <div class="popup-notification-item unread" data-type="shifts">
                <div class="popup-notification-icon shift">
                    <span class="material-icons">schedule</span>
                </div>
                <div class="popup-notification-content">
                    <div class="popup-notification-header">
                        <h4>New Shift Allocated</h4>
                        <span class="popup-notification-time">5 minutes ago</span>
                    </div>
                    <p class="popup-notification-message">You have been assigned to Lab Session CITS3200 on Friday, August 25, 2025 from 2:00 PM - 6:00 PM in Building 314, Room 105.</p>
                    <div class="popup-notification-actions-inline">
                        <button class="popup-action-btn accept">
                            <span class="material-icons">check</span>
                            Accept
                        </button>
                        <button class="popup-action-btn decline">
                            <span class="material-icons">close</span>
                            Decline
                        </button>
                    </div>
                </div>
                <div class="popup-notification-status unread-indicator"></div>
            </div>

            <div class="popup-notification-item unread" data-type="updates">
                <div class="popup-notification-icon update">
                    <span class="material-icons">info</span>
                </div>
                <div class="popup-notification-content">
                    <div class="popup-notification-header">
                        <h4>Class Information Updated</h4>
                        <span class="popup-notification-time">2 hours ago</span>
                    </div>
                    <p class="popup-notification-message">CITS3200 Software Engineering Project - Location changed from Building 314 Room 105 to Building 314 Room 208. Session time remains 2:00 PM - 6:00 PM.</p>
                    <div class="popup-notification-meta">
                        <span class="popup-tag update">Location Change</span>
                    </div>
                </div>
                <div class="popup-notification-status unread-indicator"></div>
            </div>

            <div class="popup-notification-item" data-type="shifts">
                <div class="popup-notification-icon shift">
                    <span class="material-icons">event_available</span>
                </div>
                <div class="popup-notification-content">
                    <div class="popup-notification-header">
                        <h4>Shift Confirmed</h4>
                        <span class="popup-notification-time">1 day ago</span>
                    </div>
                    <p class="popup-notification-message">Your shift for CITS1001 Object-Oriented Programming on Thursday, August 24, 2025 from 9:00 AM - 1:00 PM has been confirmed.</p>
                    <div class="popup-notification-meta">
                        <span class="popup-tag confirmed">Confirmed</span>
                    </div>
                </div>
            </div>

            <div class="popup-notification-item unread" data-type="alerts">
                <div class="popup-notification-icon alert">
                    <span class="material-icons">warning</span>
                </div>
                <div class="popup-notification-content">
                    <div class="popup-notification-header">
                        <h4>Availability Update Required</h4>
                        <span class="popup-notification-time">3 days ago</span>
                    </div>
                    <p class="popup-notification-message">Your availability hasn't been updated in 2 weeks. Please update your available times to ensure optimal shift assignments.</p>
                    <div class="popup-notification-actions-inline">
                        <button class="popup-action-btn primary">
                            <span class="material-icons">edit_calendar</span>
                            Update Now
                        </button>
                    </div>
                </div>
                <div class="popup-notification-status unread-indicator"></div>
            </div>

            <div class="popup-notification-item" data-type="updates">
                <div class="popup-notification-icon update">
                    <span class="material-icons">schedule_send</span>
                </div>
                <div class="popup-notification-content">
                    <div class="popup-notification-header">
                        <h4>Session Time Changed</h4>
                        <span class="popup-notification-time">1 week ago</span>
                    </div>
                    <p class="popup-notification-message">CITS2200 Data Structures session time updated from 10:00 AM - 2:00 PM to 11:00 AM - 3:00 PM for Wednesday, August 30, 2025.</p>
                    <div class="popup-notification-meta">
                        <span class="popup-tag update">Time Change</span>
                    </div>
                </div>
            </div>

            <div class="popup-notification-item" data-type="shifts">
                <div class="popup-notification-icon shift">
                    <span class="material-icons">assignment_turned_in</span>
                </div>
                <div class="popup-notification-content">
                    <div class="popup-notification-header">
                        <h4>Shift Completed</h4>
                        <span class="popup-notification-time">1 week ago</span>
                    </div>
                    <p class="popup-notification-message">Your shift for CITS1402 Relational Database Management Systems on August 15, 2025 has been marked as completed. Thank you for your service!</p>
                    <div class="popup-notification-meta">
                        <span class="popup-tag completed">Completed</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Overlay for popup -->
<div id="popup-overlay" class="popup-overlay"></div>

<section id="welcome" class="main-content-wrapper">
  <div class="welcome-banner">
    <div class="welcome-text">
      <h2>{{ greeting }}, {{ user.first_name }}! 👋</h2>
      <p class="user-role">Lab Facilitator</p>
      <p class="session-info">You have 3 upcoming sessions today.</p>
    </div>
    <div class="welcome-icon-wrapper">
      <span class="material-icons" style="color: white; font-size: 24px;" aria-hidden="true">wb_sunny</span>
    </div>
  </div>
</section>

<!-- Unit Selector Section -->
<section id="unit-selector" class="main-content-wrapper">
    <div class="unit-selector-container">
        <!-- Left Side: Current Unit Information -->
        <div class="unit-info-section">
            <div class="unit-main-info">
                <h2 class="unit-code">CITS1001</h2>
                <h3 class="unit-name">Introduction to Computing</h3>
            </div>
            <div class="unit-details">
                <div class="unit-badges">
                    <span class="semester-badge">Semester 2, 2025</span>
                    <span class="status-badge active">
                        <span class="material-icons">check_circle</span>
                        Active
                    </span>
                </div>
                <div class="session-info">
                    <span class="material-icons">calendar_today</span>
                    <span>6 sessions</span>
                    <span class="date-range">2/24/2025 - 6/13/2025</span>
                </div>
            </div>
        </div>
        
        <!-- Right Side: Control Buttons -->
        <div class="unit-controls-section">
            <button class="control-btn all-units-btn">
                <span class="material-icons">list</span>
                All Units
            </button>
            <div class="unit-dropdown-wrapper">
                <button class="control-btn switch-unit-btn" id="switch-unit-trigger">
                    Switch Unit
                    <span class="material-icons dropdown-arrow">keyboard_arrow_down</span>
                </button>
                <div class="dropdown-menu" id="unit-dropdown-menu" style="display: none;">
                    <!-- Active Units Group -->
                    <div class="dropdown-group">
                        <div class="group-header">
                            <span class="group-title">Active Units</span>
                            <span class="group-count">(3)</span>
                        </div>
                        <div class="group-items">
                            <div class="unit-item" data-unit-id="1">
                                <div class="unit-item-info">
                                    <span class="unit-item-code">CITS1001</span>
                                    <span class="unit-item-name">Introduction to Computing</span>
                                </div>
                                <span class="unit-item-badge active">Active</span>
                            </div>
                            <div class="unit-item" data-unit-id="2">
                                <div class="unit-item-info">
                                    <span class="unit-item-code">CITS1401</span>
                                    <span class="unit-item-name">Computer Science</span>
                                </div>
                                <span class="unit-item-badge active">Active</span>
                            </div>
                            <div class="unit-item" data-unit-id="3">
                                <div class="unit-item-info">
                                    <span class="unit-item-code">CITS2000</span>
                                    <span class="unit-item-name">Data Structures</span>
                                </div>
                                <span class="unit-item-badge active">Active</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Past Units Group -->
                    <div class="dropdown-group">
                        <div class="group-header">
                            <span class="group-title">Past Units</span>
                            <span class="group-count">(2)</span>
                        </div>
                        <div class="group-items">
                            <div class="unit-item" data-unit-id="4">
                                <div class="unit-item-info">
                                    <span class="unit-item-code">CITS2200</span>
                                    <span class="unit-item-name">Algorithms</span>
                                </div>
                                <span class="unit-item-badge completed">
                                    <span class="material-icons">check_circle</span>
                                    Completed
                                </span>
                            </div>
                            <div class="unit-item" data-unit-id="5">
                                <div class="unit-item-info">
                                    <span class="unit-item-code">CITS3000</span>
                                    <span class="unit-item-name">Software Engineering</span>
                                </div>
                                <span class="unit-item-badge completed">
                                    <span class="material-icons">check_circle</span>
                                    Completed
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section id="alert" class="main-content-wrapper">
    <div class="alert-bar">
        <div class="alert-content">
            <span class="material-icons" aria-hidden="true">warning</span>
            <p><strong>Unavailability Update!</strong> Ensure your unavailabilities is up to date across all units.</p>
        </div>
        <a href="#" class="alert-button" id="update-now-btn">
            <span>Update Now</span>
            <span class="material-icons" aria-hidden="true">arrow_forward</span>
        </a>
    </div>
</section>
<section id="stats" class="main-content-wrapper">
    <div class="stats-grid">
        <div class="stat-card purple">
            <div class="stat-header">
                <h4>This Week Hours</h4>
                <span class="material-icons" aria-hidden="true">schedule</span>
            </div>
            <p class="stat-value">32</p>
            <p class="stat-subtext">4 sessions</p>
        </div>
        <div class="stat-card blue">
            <div class="stat-header">
                <h4>Pending Approvals</h4>
                <span class="material-icons" aria-hidden="true">pending_actions</span>
            </div>
            <p class="stat-value">1</p>
            <p class="stat-subtext">Needs response</p>
        </div>
        <div class="stat-card gray">
            <div class="stat-header">
                <h4>Total Hours (Month)</h4>
                <span class="material-icons" aria-hidden="true">calendar_today</span>
            </div>
            <p class="stat-value">156</p>
            <p class="stat-subtext">This month</p>
        </div>
        <div class="stat-card green">
            <div class="stat-header">
                <h4>Available Days</h4>
                <span class="material-icons" aria-hidden="true">event_available</span>
            </div>
            <p class="stat-value" id="available-days-count">4</p>
            <p class="stat-subtext">Per week</p>
        </div>
    </div>
</section>
<section id="details" class="main-content-wrapper">
    <div class="details-single">
        <div class="details-card">
            <div class="card-header">
                <h3>Your Upcoming Sessions</h3>
                <a href="#" class="view-all-link">View All</a>
            </div>
            <div class="session-list">
                <div class="session-item">
                    <div class="session-info">
                        <div class="session-title">
                            <h4>Today</h4>
                            <span class="tag confirmed">confirmed</span>
                        </div>
                        <p class="session-time">8:00 AM - 4:00 PM</p>
                        <p class="session-location">Main Store</p>
                    </div>
                </div>
                <div class="session-item">
                    <div class="session-info">
                        <div class="session-title">
                            <h4>Tomorrow</h4>
                            <span class="tag pending">pending</span>
                        </div>
                        <p class="session-time">8:00 AM - 4:00 PM</p>
                    </div>
                    <div class="session-actions">
                        <a href="#" class="action-btn accept">
                            <img src="images/2_111.svg" alt=""> Accept
                        </a>
                        <a href="#" class="action-btn decline">Decline</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Availability View  -->
<section id="availability-view" class="main-content-wrapper" style="display: none;">
  <div class="availability-container">
    <div class="availability-header">
      <div>
        <h2>My Availability</h2>
        <p class="availability-subtitle">Set your available days and hours for scheduling</p>
      </div>
    </div>
    
    <div class="availability-days">
      <div class="day-row">
        <div class="day-toggle">
          <label class="toggle-switch">
            <input type="checkbox" class="day-checkbox" data-day="monday" checked>
            <span class="toggle-slider"></span>
          </label>
          <span class="day-label">Monday</span>
        </div>
        <div class="time-inputs">
          <input type="time" class="time-input" value="08:00">
          <span class="time-separator">to</span>
          <input type="time" class="time-input" value="18:00">
        </div>
      </div>

      <div class="day-row">
        <div class="day-toggle">
          <label class="toggle-switch">
            <input type="checkbox" class="day-checkbox" data-day="tuesday" checked>
            <span class="toggle-slider"></span>
          </label>
          <span class="day-label">Tuesday</span>
        </div>
        <div class="time-inputs">
          <input type="time" class="time-input" value="08:00">
          <span class="time-separator">to</span>
          <input type="time" class="time-input" value="18:00">
        </div>
      </div>

      <div class="day-row">
        <div class="day-toggle">
          <label class="toggle-switch">
            <input type="checkbox" class="day-checkbox" data-day="wednesday">
            <span class="toggle-slider"></span>
          </label>
          <span class="day-label">Wednesday</span>
        </div>
        <div class="time-inputs disabled">
          <span class="not-available">Not available</span>
        </div>
      </div>

      <div class="day-row">
        <div class="day-toggle">
          <label class="toggle-switch">
            <input type="checkbox" class="day-checkbox" data-day="thursday" checked>
            <span class="toggle-slider"></span>
          </label>
          <span class="day-label">Thursday</span>
        </div>
        <div class="time-inputs">
          <input type="time" class="time-input" value="08:00">
          <span class="time-separator">to</span>
          <input type="time" class="time-input" value="18:00">
        </div>
      </div>

      <div class="day-row">
        <div class="day-toggle">
          <label class="toggle-switch">
            <input type="checkbox" class="day-checkbox" data-day="friday" checked>
            <span class="toggle-slider"></span>
          </label>
          <span class="day-label">Friday</span>
        </div>
        <div class="time-inputs">
          <input type="time" class="time-input" value="08:00">
          <span class="time-separator">to</span>
          <input type="time" class="time-input" value="16:00">
        </div>
      </div>

      <div class="day-row">
        <div class="day-toggle">
          <label class="toggle-switch">
            <input type="checkbox" class="day-checkbox" data-day="saturday">
            <span class="toggle-slider"></span>
          </label>
          <span class="day-label">Saturday</span>
        </div>
        <div class="time-inputs disabled">
          <span class="not-available">Not available</span>
        </div>
      </div>

      <div class="day-row">
        <div class="day-toggle">
          <label class="toggle-switch">
            <input type="checkbox" class="day-checkbox" data-day="sunday">
            <span class="toggle-slider"></span>
          </label>
          <span class="day-label">Sunday</span>
        </div>
        <div class="time-inputs disabled">
          <span class="not-available">Not available</span>
        </div>
      </div>
    </div>

    <div class="availability-footer">
      <button class="update-btn">Update Availability</button>
    </div>
  </div>
</section>

<!-- Calendar View -->
<section id="calendar-view" class="main-content-wrapper" style="display: none;">
  <div class="calendar-container">
    <div class="calendar-header">
      <h2>My Schedule</h2>
      <div class="calendar-controls">
        <button id="prev-month" class="calendar-btn">
          <span class="material-icons">chevron_left</span>
        </button>
        <span id="current-month" class="month-title">August 2025</span>
        <button id="next-month" class="calendar-btn">
          <span class="material-icons">chevron_right</span>
        </button>
      </div>
    </div>
    
    <div class="calendar-grid">
      <div class="calendar-weekdays">
        <div class="weekday">Sun</div>
        <div class="weekday">Mon</div>
        <div class="weekday">Tue</div>
        <div class="weekday">Wed</div>
        <div class="weekday">Thu</div>
        <div class="weekday">Fri</div>
        <div class="weekday">Sat</div>
      </div>
      
      <div class="calendar-days" id="calendar-days">
      </div>
    </div>
    
    <div class="schedule-legend">
      <div class="legend-item">
        <div class="legend-color confirmed"></div>
        <span>Confirmed Sessions</span>
      </div>
      <div class="legend-item">
        <div class="legend-color pending"></div>
        <span>Pending Sessions</span>
      </div>
      <div class="legend-item">
        <div class="legend-color available"></div>
        <span>Available</span>
      </div>
    </div>
  </div>
</section>

<!-- Sessions Modal -->
<div id="sessions-modal" class="modal-overlay" style="display: none;">
    <div class="modal-content">
        <div class="modal-header">
            <h2 id="modal-title">All Sessions</h2>
            <button id="modal-close-btn" class="modal-close-btn">
                <span class="material-icons">close</span>
            </button>
        </div>
        <div class="modal-body">
            <p id="modal-subtitle" class="modal-subtitle"></p>
            <div id="modal-sessions-list" class="modal-sessions-list">
                <!-- Sessions will be populated here -->
            </div>
        </div>
    </div>
</div>

</body>
</html>








